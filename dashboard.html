<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      overflow-x: hidden;
    }
    .star {
      background-color: white;
      border-radius: 50%;
      position: absolute;
      animation: twinkling 2s infinite, move 10s infinite;
    }
    @keyframes twinkling {
      0% { opacity: 0.6; }
      50% { opacity: 1; }
      100% { opacity: 0.6; }
    }
    @keyframes move {
      0% { transform: translate(0, 0); }
      100% { transform: translate(30px, 30px); }
    }
    @keyframes soft-pulse {
      0%, 100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(216, 180, 254, 0.4);
      }
      50% {
        transform: scale(1.03);
        box-shadow: 0 0 15px 5px rgba(168, 85, 247, 0.6);
      }
    }
    .soft-pulse {
      animation: soft-pulse 2s infinite ease-in-out;
    }
  </style>
</head>
<body class="bg-black text-white min-h-screen flex flex-col relative px-4 overflow-x-hidden overflow-y-hiddden">
  <div id="starfield" class="absolute inset-0 z-0 pointer-events-none overflow-hidden"></div>
  <div class="absolute inset-0 z-0 bg-gradient-to-br from-transparent to-[#1a1a1a]"></div>

  <nav class="py-4 w-full flex justify-between items-center z-10 relative">
    <img class="w-32" src="logo.svg" alt="Rave Logo">
    <span id="coinDisplay" class="bg-white/5 border border-white/10 px-3 py-1.5 text-sm rounded-md hover:bg-white/10 transition">Loading Coins...</span>
  </nav>

  <div class="flex justify-center pt-14 relative z-10">
    <div class="w-32 h-32 flex items-center justify-center duration-1000 ease-out" data-animate="fade-in-up" data-delay="200">
      <img src="holl.png" alt="">
    </div>
  </div>

  <div class="z-10 relative flex flex-col items-center justify-center py-12">
    <h1 id="userName" class="text-3xl font-semibold mb-2 bg-gradient-to-b from-gray-600 to-white text-transparent bg-clip-text" data-animate="fade-in-up" data-delay="100"></h1>
    <p class="text-gray-300 pb-6" id="userEmail" data-animate="fade-in-up" data-delay="150"></p>

    <div id="referralSection" class="w-full max-w-lg bg-white/5 border border-white/10 p-6 rounded-lg mb-8">
      <p class="text-white mb-2">Share your referral link:</p>
      <div class="flex items-center gap-2">
        <input id="referralLink" class="flex-1 bg-transparent border border-white/10 rounded px-4 py-2 text-white" readonly>
        <button id="copyButton" class="bg-white/5 border border-white/10 px-4 py-2 text-sm rounded-md hover:bg-white/10 transition">Copy</button>
      </div>
      <div class="mt-6">
        <p class="text-gray-300 mb-2">Referral Progress:</p>
        <div class="w-full bg-white/10 rounded-full h-4 overflow-hidden">
          <div id="progressBar" class="bg-gradient-to-r from-green-400 to-blue-500 h-4" style="width: 0%"></div>
        </div>
        <p class="text-sm text-gray-400 mt-2"><span id="referralCount">0</span>/5 referrals (20 coins each)</p>
        <p class="text-sm text-pink-400 mt-4 text-center font-semibold">
          Share with 5 friends to win <span class="text-white">100 Rave Coins!</span>
        </p>
      </div>
    </div>

    <div class="grid grid-cols-3 gap-4 w-full max-w-6xl">

      <!-- Left Card: GET -->
      <div class="bg-white/5 border border-cyan-300 p-4 rounded-lg transform transition-transform duration-200 hover:scale-105">
        <h3 class="text-md font-medium mb-2">3x</h3>
        <p class="text-xs font-extralight text-gray-300">Upgrade to Premium to 3x your Earnings</p>
        <a href="premium.html"
           class="mt-4 w-full inline-flex justify-center items-center gap-2 text-sm text-white bg-white/5 border border-white/10 px-3 py-1.5 rounded-md hover:bg-white/10 transition">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v10.586l3.293-3.293a1 1 0 011.414 1.414l-5 5a1 1 0 01-1.414 0l-5-5a1 1 0 111.414-1.414L9 14.586V4a1 1 0 011-1z" clip-rule="evenodd" />
          </svg>
          Get
        </a>
      </div>

      <!-- Middle Card: Earn -->
      <div class="bg-white/5 border border-purple-300 p-4 rounded-lg shadow-lg soft-pulse transform transition-transform duration-200 hover:scale-105">
        <h3 class="text-md font-medium mb-2">Earn More</h3>
        <p class="text-xs font-extralight text-gray-300">Login Daily to Earn and Claim Rewards</p>
        <a href="earn.html"
           class="mt-4 w-full inline-flex justify-center items-center gap-2 text-sm text-white bg-white/5 border border-white/10 px-3 py-1.5 rounded-md hover:bg-white/10 transition">
          $ Earn
        </a>
      </div>

      <!-- Right Card: Invite -->
      <div class="bg-white/5 border border-blue-300 p-4 rounded-lg transform transition-transform duration-200 hover:scale-105">
        <h3 class="text-md font-medium mb-2">Refer Now</h3>
        <p class="text-xs font-extralight text-gray-300">Invite More Friends to Earn Rewards</p>
        <a id="inviteLink" href="#" class="mt-4 w-full inline-flex justify-center items-center gap-2 text-sm text-white bg-white/5 border border-white/10 px-3 py-1.5 rounded-md hover:bg-white/10 transition">
          <svg class="w-4 h-4 -rotate-45" fill="currentColor" viewBox="0 0 20 20">
            <path d="M2.94 2.94a.75.75 0 01.765-.175l13 5a.75.75 0 010 1.41l-13 5A.75.75 0 012 13.5v-3.25l8.25-1.25L2 7.75V4a.75.75 0 01.94-.765z" />
          </svg>
          Invite
        </a>        
      </div>
    </div>
  </div>

  <div class="flex flex-col md:flex-row justify-center gap-4 py-6 px-28 fade-in items-center relative z-10">
    <a href="redeem.html" class="text-sm bg-gradient-to-r from-[#00FFFF] to-blue-600 shadow-lg text-white  px-6 py-3 rounded-md hover:opacity-90 transition">Redeem Coins</a>
    <a href="sign-in.html" class="text-sm border border-white/10 bg-white/5 hover:bg-white/10 text-white/80 px-6 py-3 rounded-md hover:bg-white/10 transition duration-200">Sign Out</a>
  </div>

  <footer class="z-10 w-full text-center py-10 mt-auto border-t border-white/10">
    <div class="flex justify-center space-x-4 mb-4">
      <a href="#" class="text-gray-400 hover:text-white">Twitter</a>
      <a href="#" class="text-gray-400 hover:text-white">Instagram</a>
      <a href="#" class="text-gray-400 hover:text-white">Telegram</a>
    </div>
    <p class="text-gray-500 text-sm">&copy; 2025 EarnRave. All rights reserved.</p>
  </footer>

  <script>
    const container = document.getElementById('starfield');
    for (let i = 0; i < 100; i++) {
      const star = document.createElement('div');
      const size = Math.random() * 2 + 1;
      star.className = 'star';
      star.style.width = `${size}px`;
      star.style.height = `${size}px`;
      star.style.top = `${Math.random() * 100}%`;
      star.style.left = `${Math.random() * 100}%`;
      star.style.animationDuration = `${1.5 + Math.random() * 2}s, ${15 + Math.random() * 10}s`;
      container.appendChild(star);
    }

    document.getElementById('copyButton').addEventListener('click', function () {
      const referralLinkInput = document.getElementById('referralLink');
      referralLinkInput.select();
      referralLinkInput.setSelectionRange(0, 99999);
      document.execCommand('copy');
      alert('Copied!');
    });

    document.addEventListener('DOMContentLoaded', () => {
      const urlParams = new URLSearchParams(window.location.search);
      const email = urlParams.get('email');

      if (!email) return alert('Email missing in URL');

      fetch(`https://pure-sea-47438-9b41a08c5720.herokuapp.com/me?email=${encodeURIComponent(email)}`)
        .then(async res => {
          if (!res.ok) {
            const text = await res.text();
            throw new Error(`Failed to fetch user: ${res.status} ${text}`);
          }
          return res.json();
        })
        .then(data => {
          document.getElementById('userName').textContent = `Welcome, ${data.name}`;
          document.getElementById('userEmail').textContent = data.email;
          document.getElementById('coinDisplay').textContent = `${data.rave_coins} Rave Coins`;
          document.getElementById('referralLink').value = `https://earnrave.com/?ref=${data.referral_code}`;
          document.getElementById('referralCount').textContent = data.referral_count;
          document.getElementById('progressBar').style.width = `${Math.min(data.referral_count * 20, 100)}%`;
          document.getElementById('inviteLink').href = `referral.html?email=${encodeURIComponent(data.email)}&ref=${encodeURIComponent(data.referral_code)}`;

          if (data.bonus_awarded) {
            document.getElementById('referralSection').style.display = 'none';
          }
        })
        .catch(err => {
          console.error(err);
          alert('Failed to load user data');
        });
    });
  </script>
</body>
</html>

